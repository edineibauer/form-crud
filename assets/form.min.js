if("function"!=typeof loadMaskPlugin){function loadMaskPlugin(){var t,e,a,n={scope:{},findInternal:function(t,e,a){t instanceof String&&(t=String(t));for(var n=t.length,i=0;i<n;i++){var r=t[i];if(e.call(a,r,i,t))return{i:i,v:r}}return{i:-1,v:void 0}}};n.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,a){if(a.get||a.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=a.value)},n.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:"undefined"!=typeof global&&null!=global?global:t},n.global=n.getGlobal(this),n.polyfill=function(t,e,a,i){if(e){for(a=n.global,t=t.split("."),i=0;i<t.length-1;i++){var r=t[i];r in a||(a[r]={}),a=a[r]}(e=e(i=a[t=t[t.length-1]]))!=i&&null!=e&&n.defineProperty(a,t,{configurable:!0,writable:!0,value:e})}},n.polyfill("Array.prototype.find",function(t){return t||function(t,e){return n.findInternal(this,t,e).v}},"es6-impl","es3"),t=function(t){var e=function(e,a,n){var i={invalid:[],getCaret:function(){try{var t,a=0,n=e.get(0),r=document.selection,s=n.selectionStart;return r&&-1===navigator.appVersion.indexOf("MSIE 10")?((t=r.createRange()).moveStart("character",-i.val().length),a=t.text.length):(s||"0"===s)&&(a=s),a}catch(t){}},setCaret:function(t){try{if(e.is(":focus")){var a,n=e.get(0);n.setSelectionRange?n.setSelectionRange(t,t):((a=n.createTextRange()).collapse(!0),a.moveEnd("character",t),a.moveStart("character",t),a.select())}}catch(t){}},events:function(){e.on("keydown.mask",function(t){e.data("mask-keycode",t.keyCode||t.which),e.data("mask-previus-value",e.val()),e.data("mask-previus-caret-pos",i.getCaret()),i.maskDigitPosMapOld=i.maskDigitPosMap}).on(t.jMaskGlobals.useInput?"input.mask":"keyup.mask",i.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}).on("change.mask",function(){e.data("changed",!0)}).on("blur.mask",function(){o===i.val()||e.data("changed")||e.trigger("change"),e.data("changed",!1)}).on("blur.mask",function(){o=i.val()}).on("focus.mask",function(e){!0===n.selectOnFocus&&t(e.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!r.test(i.val())&&i.val("")})},getRegexMask:function(){for(var t,e,n,i,r=[],o=0;o<a.length;o++)(t=s.translation[a.charAt(o)])?(e=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=t.optional,(t=t.recursive)?(r.push(a.charAt(o)),i={digit:a.charAt(o),pattern:e}):r.push(n||t?e+"?":e)):r.push(a.charAt(o).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return r=r.join(""),i&&(r=r.replace(new RegExp("("+i.digit+"(.*"+i.digit+")?)"),"($1)?").replace(new RegExp(i.digit,"g"),i.pattern)),new RegExp(r)},destroyEvents:function(){e.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(t){var a=e.is("input")?"val":"text";return 0<arguments.length?(e[a]()!==t&&e[a](t),a=e):a=e[a](),a},calculateCaretPosition:function(){var t=e.data("mask-previus-value")||"",a=i.getMasked(),n=i.getCaret();if(t!==a){var r,s=e.data("mask-previus-caret-pos")||0,o=(a=a.length,t.length),l=t=0,c=0,u=0;for(r=n;r<a&&i.maskDigitPosMap[r];r++)l++;for(r=n-1;0<=r&&i.maskDigitPosMap[r];r--)t++;for(r=n-1;0<=r;r--)i.maskDigitPosMap[r]&&c++;for(r=s-1;0<=r;r--)i.maskDigitPosMapOld[r]&&u++;n>o?n=10*a:s>=n&&s!==o?i.maskDigitPosMapOld[n]||(s=n,n=n-(u-c)-t,i.maskDigitPosMap[n]&&(n=s)):n>s&&(n=n+(c-u)+l)}return n},behaviour:function(a){a=a||window.event,i.invalid=[];var n=e.data("mask-keycode");if(-1===t.inArray(n,s.byPassKeys)){n=i.getMasked();var r=i.getCaret();return setTimeout(function(){i.setCaret(i.calculateCaretPosition())},10),i.val(n),i.setCaret(r),i.callbacks(a)}},getMasked:function(t,e){var r,o,l,c=[],u=void 0===e?i.val():e+"",d=0,f=a.length,p=0,m=u.length,v=1,h="push",g=-1,k=0,y=[];for(n.reverse?(h="unshift",v=-1,r=0,d=f-1,p=m-1,o=function(){return-1<d&&-1<p}):(r=f-1,o=function(){return d<f&&p<m});o();){var b=a.charAt(d),$=u.charAt(p),M=s.translation[b];M?($.match(M.pattern)?(c[h]($),M.recursive&&(-1===g?g=d:d===r&&d!==g&&(d=g-v),r===g&&(d-=v)),d+=v):$===l?(k--,l=void 0):M.optional?(d+=v,p-=v):M.fallback?(c[h](M.fallback),d+=v,p-=v):i.invalid.push({p:p,v:$,e:M.pattern}),p+=v):(t||c[h](b),$===b?(y.push(p),p+=v):(l=b,y.push(p+k),k++),d+=v)}return u=a.charAt(r),f!==m+1||s.translation[u]||c.push(u),c=c.join(""),i.mapMaskdigitPositions(c,y,m),c},mapMaskdigitPositions:function(t,e,a){for(t=n.reverse?t.length-a:0,i.maskDigitPosMap={},a=0;a<e.length;a++)i.maskDigitPosMap[e[a]+t]=1},callbacks:function(t){var r=i.val(),s=r!==o,l=[r,t,e,n],c=function(t,e,a){"function"==typeof n[t]&&e&&n[t].apply(this,a)};c("onChange",!0===s,l),c("onKeyPress",!0===s,l),c("onComplete",r.length===a.length,l),c("onInvalid",0<i.invalid.length,[r,t,e,i.invalid,n])}};e=t(e);var r,s=this,o=i.val();a="function"==typeof a?a(i.val(),void 0,e,n):a,s.mask=a,s.options=n,s.remove=function(){var t=i.getCaret();return i.destroyEvents(),i.val(s.getCleanVal()),i.setCaret(t),e},s.getCleanVal=function(){return i.getMasked(!0)},s.getMaskedVal=function(t){return i.getMasked(!1,t)},s.init=function(o){if(o=o||!1,n=n||{},s.clearIfNotMatch=t.jMaskGlobals.clearIfNotMatch,s.byPassKeys=t.jMaskGlobals.byPassKeys,s.translation=t.extend({},t.jMaskGlobals.translation,n.translation),s=t.extend(!0,{},s,n),r=i.getRegexMask(),o)i.events(),i.val(i.getMasked());else{n.placeholder&&e.attr("placeholder",n.placeholder),e.data("mask")&&e.attr("autocomplete","off"),o=0;for(var l=!0;o<a.length;o++){var c=s.translation[a.charAt(o)];if(c&&c.recursive){l=!1;break}}l&&e.attr("maxlength",a.length),i.destroyEvents(),i.events(),o=i.getCaret(),i.val(i.getMasked()),i.setCaret(o)}},s.init(!e.is("input"))};t.maskWatchers={};var a=function(){var a=t(this),i={},r=a.attr("data-mask");if(a.attr("data-mask-reverse")&&(i.reverse=!0),a.attr("data-mask-clearifnotmatch")&&(i.clearIfNotMatch=!0),"true"===a.attr("data-mask-selectonfocus")&&(i.selectOnFocus=!0),n(a,r,i))return a.data("mask",new e(this,r,i))},n=function(e,a,n){n=n||{};var i=t(e).data("mask"),r=JSON.stringify;e=t(e).val()||t(e).text();try{return"function"==typeof a&&(a=a(e)),"object"!=typeof i||r(i.options)!==r(n)||i.mask!==a}catch(t){}},i=function(t){var e,a=document.createElement("div");return(e=(t="on"+t)in a)||(a.setAttribute(t,"return;"),e="function"==typeof a[t]),e};t.fn.mask=function(a,i){i=i||{};var r=this.selector,s=(o=t.jMaskGlobals).watchInterval,o=i.watchInputs||o.watchInputs,l=function(){if(n(this,a,i))return t(this).data("mask",new e(this,a,i))};return t(this).each(l),r&&""!==r&&o&&(clearInterval(t.maskWatchers[r]),t.maskWatchers[r]=setInterval(function(){t(document).find(r).each(l)},s)),this},t.fn.masked=function(t){return this.data("mask").getMaskedVal(t)},t.fn.unmask=function(){return clearInterval(t.maskWatchers[this.selector]),delete t.maskWatchers[this.selector],this.each(function(){var e=t(this).data("mask");e&&e.remove().removeData("mask")})},t.fn.cleanVal=function(){return this.data("mask").getCleanVal()},t.applyDataMask=function(e){((e=e||t.jMaskGlobals.maskElements)instanceof t?e:t(e)).filter(t.jMaskGlobals.dataMaskAttr).each(a)},i={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&i("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}},t.jMaskGlobals=t.jMaskGlobals||{},(i=t.jMaskGlobals=t.extend(!0,{},i,t.jMaskGlobals)).dataMask&&t.applyDataMask(),setInterval(function(){t.jMaskGlobals.watchDataMask&&t.applyDataMask()},i.watchInterval)},e=window.jQuery,a=window.Zepto,"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(e||a)}loadMaskPlugin()}if("function"!=typeof loadMask){var SPMaskBehavior=function(t){return 11===t.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},spOptions={onKeyPress:function(t,e,a,n){a.mask(SPMaskBehavior.apply({},arguments),n)}};function loadMask(){$(".telefone").mask(SPMaskBehavior,spOptions),$(".rg").mask("9999999999",{reverse:!0}),$(".ie").mask("999.999.999.999",{reverse:!0}),$(".cpf").mask("999.999.999-99",{reverse:!0}),$(".cnpj").mask("99.999.999/9999-99",{reverse:!0}),$(".cep").mask("99999-999",{reverse:!0}),$(".valor").mask("#.##0,00",{reverse:!0}),$(".date_time").mask("00/00/0000 00:00:00")}}if("function"!=typeof openPanel)function openPanel(t,e,a,n){n.panel(themeWindow("Editar "+t,{lib:"form-crud",file:"read/form",entity:t,id:a},function(t){formSubmit($("#"+t).find(".ontab-content").find(".form-crud"),e)}))}if("function"!=typeof formGetData)function formGetData(t){function e(t,e){return"checkbox"===t.attr("type")?(n=e,(a=t).hasClass("switchCheck")?a.prop("checked")?1:0:(n||(n=[]),a.prop("checked")?n.push(parseInt(a.val())):n.removeItem(a.val()),n)):"radio"!==t.attr("type")?t.is(".telefone, .rg, .ie, .cpf, .cnpj, .cep, .valor, .date_time")&&""!==t.val()?t.cleanVal():t.val():t.prop("checked")?t.val():e||void 0;var a,n}var a={};return t.find("input, textarea, select").each(function(){void 0!==$(this).attr("data-model")&&(a[$(this).attr("data-model")]=e($(this),void 0!==a[$(this).attr("data-model")]?a[$(this).attr("data-model")]:null))}),a}var saveTime;if("function"!=typeof formSubmit)function formSubmit(t,e){function a(t){var e=formGetData(t);post("form-crud",t.attr("data-action"),{entity:t.attr("data-entity"),dados:e},function(a){var n;(n=t).find(".md-radio--fake").css("border-color","initial"),n.find(".radio-title").removeClass("error-span"),n.find(".listButton").removeClass("error-btn"),n.find(".error-message").remove(),n.find("input,textarea,select").removeClass("subErro").siblings("label").removeClass("error-span").siblings(".error-message").remove(),isNaN(a)?function t(e,a,n){n=n||"dados.",$.each(a,function(a,i){if("object"==typeof i)t(e,i,n+a+".");else{var r=e.find("[data-model='"+(n+a)+"']");"radio"===r.attr("data-format")?(r.siblings(".md-radio--fake").css("border-color","red"),r.parent().siblings(".radio-title").addClass("error-span")):"list"===r.attr("data-format")?(r.siblings(".listButton").addClass("error-btn").parent().siblings(".rest").find("input[type=text]").siblings(".error-message").remove(),r.parent().siblings(".rest").append('<span class="error-span error-message">'+i+"</span>")):(r.siblings("label").addClass("error-span"),r.siblings(".error-message").remove(),r.addClass("subErro").parent().append('<span class="error-span error-message">'+i+"</span>"))}})}(t,a[t.attr("data-entity")]):""===e["dados.id"]&&function(t,e){e=e||null,$("#form_"+t).loading();var a=$("#fields-"+t).val();post("form-crud","children/form",{entity:t,id:e,fields:a},function(e){e&&$("#form_"+t).closest(".form-control").replaceWith(e)})}(t.attr("data-entity"),a),saveTime||(window.onbeforeunload=null)})}if(clearTimeout(saveTime),window.onbeforeunload=function(){return clearTimeout(saveTime),a(t),window.onbeforeunload=null,!0},void 0!==e){var n=formGetData(t);post("form-crud",t.attr("data-action"),{entity:t.attr("data-entity"),dados:n},function(a){var n=t.find("[data-model='"+t.find("input[type=hidden][rel='title']").val()+"']").val();"list_mult"===e.attr("data-format")?!isNaN(a)&&a>0&&setListMultValue(e,a,n):(!isNaN(a)&&a>0&&e.val()!==a?e.val(a).trigger("change"):""===e.val()&&""!==t.find("input[type=hidden][data-model='dados.id']").val()&&e.val(t.find("input[type=hidden][data-model='dados.id']").val()).trigger("change"),""!==e.val()&&"string"==typeof t.find("input[type=hidden][rel='title']").val()&&e.parent().siblings(".rest").find("input[type=text]").val(n)),window.onbeforeunload=null})}else saveTime=setTimeout(function(){saveTime=null,a(t)},400)}if("function"!=typeof choseList)function choseList(t,e){}if("function"!=typeof formAutoSubmit){function formAutoSubmit(t){$(t).off("keyup change","input, textarea, select").on("keyup change","input, textarea, select",function(t){[13,37,38,39,40].indexOf(t.which)<0&&"string"==typeof $(this).attr("data-model")?formSubmit($(this).closest(".form-crud")):""===$(this).val()&&$(this).hasClass("form-list")&&$(this).parent().prev().find("input[type=hidden]").val("").trigger("change")}).off("click",".listButton").on("click",".listButton",function(){openPanel($(this).attr("data-entity"),$(this).siblings("input[type=hidden]"),$(this).siblings("input[type=hidden]").val(),$(this))}).off("keypress keydown","button").on("keypress keydown","button",function(t){t.preventDefault()}).off("keyup",".form-list").on("keyup",".form-list",function(t){var e=$(this);if([38,40,13].indexOf(t.which)>-1){var a=$("#list-complete-"+e.attr("id"));38===t.which?a.find("li.active").prev().length&&a.find("li.active").removeClass("active").prev().addClass("active"):40===t.which?a.find("li.active").next().length&&a.find("li.active").removeClass("active").next().addClass("active"):13===t.which&&selectList(a)}else[37,39].indexOf(t.which)<0&&(""!==e.val()?readList(e.attr("data-entity"),e.val(),e.attr("id")):$("#list-complete-"+e.attr("id")).html(""))}).off("dblclick",".form-list").on("dblclick",".form-list",function(){readList($(this).attr("data-entity"),$(this).val(),$(this).attr("id"))}).off("focusout",".form-list").on("focusout",".form-list",function(){$this=$(this),setTimeout(function(){$("#list-complete-"+$this.attr("id")).html("")},50)}),$(".dropzone").length&&$(".dropzone").each(function(){var t=$(this),e=t.siblings("input[type=hidden]"),a=e.attr("data-format");new Dropzone("#"+t.attr("id"),{acceptedFiles:t.find("input[type=file]").attr("accept"),uploadMultiple:"files"===a,maxFiles:"files"===a?20:1,addRemoveLinks:!0,maxFilesize:500,dictDefaultMessage:"Selecione ou Arraste Arquivos",dictCancelUpload:"Cancelar",dictRemoveFile:"Excluir",dictInvalidFileType:"Tipo não Permitido",dictFileTooBig:"Máximo de 500MB",dictResponseError:"Erro ao Salvar",dictMaxFilesExceeded:"Máximo de Uploads Atingido",init:function(){if(this.on("success",function(t,a){a=$.parseJSON(a);var n=""!==e.val()?$.parseJSON(e.val()):[];n=$.grep(n,function(){return!0}),$.each($.parseJSON(a.data),function(e,a){1===a.response&&a.data.name===t.name&&0===$.grep(n,function(e){return e.name===t.name}).length?n.push(a.data):"string"==typeof a.data&&$("body").panel(themeNotify(a.data,"warning"))}),$(a.id).val(JSON.stringify(n)).trigger("change")}).on("removedfile",function(a){post("form-crud","delete/source",{entity:t.find("input[name=entity]").val(),column:t.find("input[name=column]").val(),name:a.name,files:e.val()},function(t){e.val(t).trigger("change")})}),""!==e.val()){var a=this;$.each($.parseJSON(e.val()),function(t,e){var n={name:e.name,size:e.size,type:e.type,status:Dropzone.ADDED,url:e.url,accepted:!0};a.emit("addedfile",n),e.type.match(/image.*/)&&a.emit("thumbnail",n,e.url),a.emit("complete",n),a.files.push(n)})}}})})}function setJsonValue(t,e){var a=$.grep(""!==t.val()?$.parseJSON(t.val()):[],function(){return!0});-1===$.inArray(e,a)&&a.push(e),t.val(JSON.stringify(a)).trigger("change")}function removeJsonValue(t,e){var a=$.grep(""!==t.val()?$.parseJSON(t.val()):[],function(){return!0});a.removeItem(e),t.val(JSON.stringify(a)).trigger("change")}function removerListMult(t,e){removeJsonValue($(t),e),$(".listmult-card[rel="+e+"]").remove()}function editListMult(t,e,a){openPanel(t,$(e),a,$(e+"-btn"))}function readList(t,e,a){post("form-crud","read/list",{search:e,entity:t},function(t){var e=$("#list-complete-"+a);e.html(t),$(".list-option").off("mousedown").on("mousedown",function(){$(".list-option").removeClass("active"),$(this).addClass("active"),selectList(e)})})}function selectList(t){var e=t.find("li.active");t.html(""),"mult"===t.attr("rel")?setListMultValue(t.parent().prev().find("input[type=hidden]"),parseInt(e.attr("rel")),e.text().trim()):selectListOne(t,e)}function setListMultValue(t,e,a){var n=!0;$.each($("#listmult-content").find(".listmult-title"),function(){$(this).text().trim()===a&&(n=!1)}),n&&(copy("#tpl-listmult","#listmult-content",[e,a],"append"),setJsonValue(t,e))}function selectListOne(t,e){t.siblings("input[type=text]").val(e.text().trim()),t.parent().prev().find("input[type=hidden]").val(parseInt(e.attr("rel"))).trigger("change")}}Dropzone.autoDiscover=!1;