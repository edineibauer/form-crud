"use strict";var _createClass=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}();function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Emitter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=this._callbacks[e];if(t){for(var i=arguments.length,n=Array(1<i?i-1:0),a=1;a<i;a++)n[a-1]=arguments[a];for(var s=0,r=r=t;;){if(s>=r.length)break;r[s++].apply(this,n)}}return this}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var i=this._callbacks[e];if(!i)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var n=0;n<i.length;n++){if(i[n]===t){i.splice(n,1);break}}return this}}]),e}(),Dropzone=function(e){function b(e,t){_classCallCheck(this,b);var i,n=_possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),a=void 0;if(n.element=e,n.version=b.version,n.defaultOptions.previewTemplate=n.defaultOptions.previewTemplate.replace(/\n*/g,""),n.clickableElements=[],n.listeners=[],n.files=[],"string"==typeof n.element&&(n.element=document.querySelector(n.element)),!n.element||null==n.element.nodeType)throw new Error("Invalid dropzone element.");if(n.element.dropzone)throw new Error("Dropzone already attached.");b.instances.push(n),n.element.dropzone=n;var s,r=null!=(i=b.optionsForElement(n.element))?i:{};if(n.options=b.extend({},n.defaultOptions,r,null!=t?t:{}),n.options.forceFallback||!b.isBrowserSupported())return s=n.options.fallback.call(n),_possibleConstructorReturn(n,s);if(null==n.options.url&&(n.options.url=n.element.getAttribute("action")),!n.options.url)throw new Error("No URL provided.");if(n.options.acceptedFiles&&n.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(n.options.uploadMultiple&&n.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return n.options.acceptedMimeTypes&&(n.options.acceptedFiles=n.options.acceptedMimeTypes,delete n.options.acceptedMimeTypes),null!=n.options.renameFilename&&(n.options.renameFile=function(e){return n.options.renameFilename.call(n,e.name,e)}),n.options.method=n.options.method.toUpperCase(),(a=n.getExistingFallback())&&a.parentNode&&a.parentNode.removeChild(a),!1!==n.options.previewsContainer&&(n.options.previewsContainer?n.previewsContainer=b.getElement(n.options.previewsContainer,"previewsContainer"):n.previewsContainer=n.element),n.options.clickable&&(!0===n.options.clickable?n.clickableElements=[n.element]:n.clickableElements=b.getElements(n.options.clickable,"clickable")),n.init(),n}return _inherits(b,Emitter),_createClass(b,null,[{key:"initClass",value:function(){this.prototype.Emitter=Emitter,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,i){if(i)return{dzuuid:i.file.upload.uuid,dzchunkindex:i.index,dztotalfilesize:i.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:i.file.upload.totalChunkCount,dzchunkbyteoffset:i.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var t=0,i=i=this.element.getElementsByTagName("div");;){if(t>=i.length)break;var n=i[t++];if(/(^| )dz-message($| )/.test(n.className)){(e=n).className="dz-message";break}}e||(e=b.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var a=e.getElementsByTagName("span")[0];return a&&(null!=a.textContent?a.textContent=this.options.dictFallbackMessage:null!=a.innerText&&(a.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,i,n){var a={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},s=e.width/e.height;null==t&&null==i?(t=a.srcWidth,i=a.srcHeight):null==t?t=i*s:null==i&&(i=t/s);var r=(t=Math.min(t,a.srcWidth))/(i=Math.min(i,a.srcHeight));if(a.srcWidth>t||a.srcHeight>i)if("crop"===n)r<s?(a.srcHeight=e.height,a.srcWidth=a.srcHeight*r):(a.srcWidth=e.width,a.srcHeight=a.srcWidth/r);else{if("contain"!==n)throw new Error("Unknown resizeMethod '"+n+"'");r<s?i=t/s:t=i*s}return a.srcX=(e.width-a.srcWidth)/2,a.srcY=(e.height-a.srcHeight)/2,a.trgWidth=t,a.trgHeight=i,a},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var i=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){t.previewElement=b.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement);for(var e=0,n=n=t.previewElement.querySelectorAll("[data-dz-name]");;){if(e>=n.length)break;var a=n[e++];a.textContent=t.name}for(var s=0,r=r=t.previewElement.querySelectorAll("[data-dz-size]");!(s>=r.length);)(a=r[s++]).innerHTML=this.filesize(t.size);this.options.addRemoveLinks&&(t._removeLink=b.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink));for(var o=function(e){return e.preventDefault(),e.stopPropagation(),t.status===b.UPLOADING?b.confirm(i.options.dictCancelUploadConfirmation,function(){return i.removeFile(t)}):i.options.dictRemoveFileConfirmation?b.confirm(i.options.dictRemoveFileConfirmation,function(){return i.removeFile(t)}):i.removeFile(t)},l=0,c=c=t.previewElement.querySelectorAll("[data-dz-remove]");;){if(l>=c.length)break;c[l++].addEventListener("click",o)}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(var i=0,n=n=e.previewElement.querySelectorAll("[data-dz-thumbnail]");;){if(i>=n.length)break;var a=n[i++];a.alt=e.name,a.src=t}return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error);for(var i=0,n=n=e.previewElement.querySelectorAll("[data-dz-errormessage]");;){if(i>=n.length)break;n[i++].textContent=t}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,i){if(e.previewElement)for(var n=0,a=a=e.previewElement.querySelectorAll("[data-dz-uploadprogress]");;){if(n>=a.length)break;var s=a[n++];"PROGRESS"===s.nodeName?s.value=t:s.style.width=t+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.textContent=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var a=0,s=s=i;;){if(a>=s.length)break;var r=s[a++];for(var o in r){var l=r[o];e[o]=l}}return e}}]),_createClass(b,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function(t){return this.files.filter(function(e){return e.status===t}).map(function(e){return e})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(b.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(b.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(b.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(e){return e.status===b.UPLOADING||e.status===b.QUEUED}).map(function(e){return e})}},{key:"init",value:function(){var s=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(b.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length){!function a(){return s.hiddenFileInput&&s.hiddenFileInput.parentNode.removeChild(s.hiddenFileInput),s.hiddenFileInput=document.createElement("input"),s.hiddenFileInput.setAttribute("type","file"),(null===s.options.maxFiles||1<s.options.maxFiles)&&s.hiddenFileInput.setAttribute("multiple","multiple"),s.hiddenFileInput.className="dz-hidden-input",null!==s.options.acceptedFiles&&s.hiddenFileInput.setAttribute("accept",s.options.acceptedFiles),null!==s.options.capture&&s.hiddenFileInput.setAttribute("capture",s.options.capture),s.hiddenFileInput.style.visibility="hidden",s.hiddenFileInput.style.position="absolute",s.hiddenFileInput.style.top="0",s.hiddenFileInput.style.left="0",s.hiddenFileInput.style.height="0",s.hiddenFileInput.style.width="0",document.querySelector(s.options.hiddenInputContainer).appendChild(s.hiddenFileInput),s.hiddenFileInput.addEventListener("change",function(){var e=s.hiddenFileInput.files;if(e.length)for(var t=0,i=i=e;!(t>=i.length);){var n=i[t++];s.addFile(n)}return s.emit("addedfiles",e),a()})}()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(var e=0,t=t=this.events;;){if(e>=t.length)break;var i=t[e++];this.on(i,this.options[i])}this.on("uploadprogress",function(){return s.updateTotalUploadProgress()}),this.on("removedfile",function(){return s.updateTotalUploadProgress()}),this.on("canceled",function(e){return s.emit("complete",e)}),this.on("complete",function(e){if(0===s.getAddedFiles().length&&0===s.getUploadingFiles().length&&0===s.getQueuedFiles().length)return setTimeout(function(){return s.emit("queuecomplete")},0)});var n=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(e){return s.emit("dragstart",e)},dragenter:function(e){return n(e),s.emit("dragenter",e)},dragover:function(e){var t=void 0;try{t=e.dataTransfer.effectAllowed}catch(e){}return e.dataTransfer.dropEffect="move"===t||"linkMove"===t?"move":"copy",n(e),s.emit("dragover",e)},dragleave:function(e){return s.emit("dragleave",e)},drop:function(e){return n(e),s.drop(e)},dragend:function(e){return s.emit("dragend",e)}}}],this.clickableElements.forEach(function(t){return s.listeners.push({element:t,events:{click:function(e){return(t!==s.element||e.target===s.element||b.elementInside(e.target,s.element.querySelector(".dz-message")))&&s.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,b.instances.splice(b.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e=void 0,t=0,i=0;if(this.getActiveFiles().length){for(var n=0,a=a=this.getActiveFiles();;){if(n>=a.length)break;var s=a[n++];t+=s.upload.bytesSent,i+=s.upload.total}e=100*t/i}else e=100;return this.emit("totaluploadprogress",e,i,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e,t=void 0;if(e=this.getExistingFallback())return e;var i='<div class="dz-fallback">';this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var n=b.createElement(i);return"FORM"!==this.element.tagName?(t=b.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(n):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:n}},{key:"getExistingFallback",value:function(){for(var e=function(e){for(var t=0,i=i=e;;){if(t>=i.length)break;var n=i[t++];if(/(^| )fallback($| )/.test(n.className))return n}},t=["div","form"],i=0;i<t.length;i++){var n,a=t[i];if(n=e(this.element.getElementsByTagName(a)))return n}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(n){return function(){var e=[];for(var t in n.events){var i=n.events[t];e.push(n.element.addEventListener(t,i,!1))}return e}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(n){return function(){var e=[];for(var t in n.events){var i=n.events[t];e.push(n.element.removeEventListener(t,i,!1))}return e}()})}},{key:"disable",value:function(){var t=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(e){return t.cancelUpload(e)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,i="b";if(0<e){for(var n=["tb","gb","mb","kb","b"],a=0;a<n.length;a++){var s=n[a];if(Math.pow(this.options.filesizeBase,4-a)/10<=e){t=e/Math.pow(this.options.filesizeBase,4-a),i=s;break}}t=Math.round(10*t)/10}return"<strong>"+t+"</strong> "+this.options.dictFileSizeUnits[i]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);var t=e.dataTransfer.files;if(this.emit("addedfiles",t),t.length){var i=e.dataTransfer.items;i&&i.length&&null!=i[0].webkitGetAsEntry?this._addFilesFromItems(i):this.handleFiles(t)}}}},{key:"paste",value:function(e){if(null!=__guard__(null!=e?e.clipboardData:void 0,function(e){return e.items})){this.emit("paste",e);var t=e.clipboardData.items;return t.length?this._addFilesFromItems(t):void 0}}},{key:"handleFiles",value:function(e){for(var t=0,i=i=e;;){if(t>=i.length)break;var n=i[t++];this.addFile(n)}}},{key:"_addFilesFromItems",value:function(s){var r=this;return function(){for(var e=[],t=0,i=i=s;;){if(t>=i.length)break;var n,a=i[t++];null!=a.webkitGetAsEntry&&(n=a.webkitGetAsEntry())?n.isFile?e.push(r.addFile(a.getAsFile())):n.isDirectory?e.push(r._addFilesFromDirectory(n,n.name)):e.push(void 0):null!=a.getAsFile&&(null==a.kind||"file"===a.kind)?e.push(r.addFile(a.getAsFile())):e.push(void 0)}return e}()}},{key:"_addFilesFromDirectory",value:function(e,s){var r=this,t=e.createReader(),i=function(t){return __guardMethod__(console,"log",function(e){return e.log(t)})};return function a(){return t.readEntries(function(e){if(0<e.length){for(var t=0,i=i=e;!(t>=i.length);){var n=i[t++];n.isFile?n.file(function(e){if(!r.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=s+"/"+e.name,r.addFile(e)}):n.isDirectory&&r._addFilesFromDirectory(n,s+"/"+n.name)}a()}return null},i)}()}},{key:"accept",value:function(e,t){return e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):b.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}},{key:"addFile",value:function(t){var i=this;return t.upload={uuid:b.uuidv4(),progress:0,total:t.size,bytesSent:0,filename:this._renameFile(t),chunked:this.options.chunking&&(this.options.forceChunking||t.size>this.options.chunkSize),totalChunkCount:Math.ceil(t.size/this.options.chunkSize)},this.files.push(t),t.status=b.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){return e?(t.accepted=!1,i._errorProcessing([t],e)):(t.accepted=!0,i.options.autoQueue&&i.enqueueFile(t)),i._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(e){for(var t=0,i=i=e;;){if(t>=i.length)break;var n=i[t++];this.enqueueFile(n)}return null}},{key:"enqueueFile",value:function(e){var t=this;if(e.status!==b.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=b.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return t.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var t=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var i=this._thumbnailQueue.shift();return this.createThumbnail(i,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(e){return t.emit("thumbnail",i,e),t._processingThumbnail=!1,t._processThumbnailQueue()})}}},{key:"removeFile",value:function(e){if(e.status===b.UPLOADING&&this.cancelUpload(e),this.files=without(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);for(var t=0,i=i=this.files.slice();;){if(t>=i.length)break;var n=i[t++];(n.status!==b.UPLOADING||e)&&this.removeFile(n)}return null}},{key:"resizeImage",value:function(a,e,t,i,s){var r=this;return this.createThumbnail(a,e,t,i,!1,function(e,t){if(null==t)return s(a);var i=r.options.resizeMimeType;null==i&&(i=a.type);var n=t.toDataURL(i,r.options.resizeQuality);return"image/jpeg"!==i&&"image/jpg"!==i||(n=ExifRestore.restore(a.dataURL,n)),s(b.dataURItoBlob(n))})}},{key:"createThumbnail",value:function(e,t,i,n,a,s){var r=this,o=new FileReader;return o.onload=function(){if(e.dataURL=o.result,"image/svg+xml"!==e.type)return r.createThumbnailFromUrl(e,t,i,n,a,s);null!=s&&s(o.result)},o.readAsDataURL(e)}},{key:"createThumbnailFromUrl",value:function(s,r,o,l,t,c,e){var d=this,u=document.createElement("img");return e&&(u.crossOrigin=e),u.onload=function(){var e=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&t&&(e=function(e){return EXIF.getData(u,function(){return e(EXIF.getTag(this,"Orientation"))})}),e(function(e){s.width=u.width,s.height=u.height;var t=d.options.resize.call(d,s,r,o,l),i=document.createElement("canvas"),n=i.getContext("2d");switch(i.width=t.trgWidth,i.height=t.trgHeight,4<e&&(i.width=t.trgHeight,i.height=t.trgWidth),e){case 2:n.translate(i.width,0),n.scale(-1,1);break;case 3:n.translate(i.width,i.height),n.rotate(Math.PI);break;case 4:n.translate(0,i.height),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-i.height);break;case 7:n.rotate(.5*Math.PI),n.translate(i.width,-i.height),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-i.width,0)}drawImageIOSFix(n,u,null!=t.srcX?t.srcX:0,null!=t.srcY?t.srcY:0,t.srcWidth,t.srcHeight,null!=t.trgX?t.trgX:0,null!=t.trgY?t.trgY:0,t.trgWidth,t.trgHeight);var a=i.toDataURL("image/png");if(null!=c)return c(a,i)})},null!=c&&(u.onerror=c),u.src=s.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,i=t;if(!(e<=t)){var n=this.getQueuedFiles();if(0<n.length){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-t));for(;i<e;){if(!n.length)return;this.processFile(n.shift()),i++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){for(var t=0,i=i=e;;){if(t>=i.length)break;var n=i[t++];n.processing=!0,n.status=b.UPLOADING,this.emit("processing",n)}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(t){return this.files.filter(function(e){return e.xhr===t}).map(function(e){return e})}},{key:"cancelUpload",value:function(e){if(e.status===b.UPLOADING){for(var t=this._getFilesWithXhr(e.xhr),i=0,n=n=t;;){if(i>=n.length)break;n[i++].status=b.CANCELED}void 0!==e.xhr&&e.xhr.abort();for(var a=0,s=s=t;;){if(a>=s.length)break;var r=s[a++];this.emit("canceled",r)}this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else e.status!==b.ADDED&&e.status!==b.QUEUED||(e.status=b.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"==typeof e){for(var t=arguments.length,i=Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.apply(this,i)}return e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(o){var l=this;this._transformFiles(o,function(e){if(o[0].upload.chunked){var a=o[0],s=e[0];a.upload.chunks=[];var n=function(){for(var e=0;void 0!==a.upload.chunks[e];)e++;if(!(e>=a.upload.totalChunkCount)){0;var t=e*l.options.chunkSize,i=Math.min(t+l.options.chunkSize,a.size),n={name:l._getParamName(0),data:s.webkitSlice?s.webkitSlice(t,i):s.slice(t,i),filename:a.upload.filename,chunkIndex:e};a.upload.chunks[e]={file:a,index:e,dataBlock:n,status:b.UPLOADING,progress:0,retries:0},l._uploadData(o,[n])}};if(a.upload.finishedChunkUpload=function(e){var t=!0;e.status=b.SUCCESS,e.dataBlock=null;for(var i=0;i<a.upload.totalChunkCount;i++){if(void 0===a.upload.chunks[i])return n();a.upload.chunks[i].status!==b.SUCCESS&&(t=!1)}t&&l.options.chunksUploaded(a,function(){l._finished(o,"",null)})},l.options.parallelChunkUploads)for(var t=0;t<a.upload.totalChunkCount;t++)n();else n()}else{for(var i=[],r=0;r<o.length;r++)i[r]={name:l._getParamName(r),data:e[r],filename:o[r].upload.filename};l._uploadData(o,i)}})}},{key:"_getChunk",value:function(e,t){for(var i=0;i<e.upload.totalChunkCount;i++)if(void 0!==e.upload.chunks[i]&&e.upload.chunks[i].xhr===t)return e.upload.chunks[i]}},{key:"_uploadData",value:function(t,e){for(var i=this,n=new XMLHttpRequest,a=0,s=s=t;;){if(a>=s.length)break;s[a++].xhr=n}t[0].upload.chunked&&(t[0].upload.chunks[e[0].chunkIndex].xhr=n);var r=this.resolveOption(this.options.method,t),o=this.resolveOption(this.options.url,t);n.open(r,o,!0),n.timeout=this.resolveOption(this.options.timeout,t),n.withCredentials=!!this.options.withCredentials,n.onload=function(e){i._finishedUploading(t,n,e)},n.onerror=function(){i._handleUploadError(t,n)},(null!=n.upload?n.upload:n).onprogress=function(e){return i._updateFilesUploadProgress(t,n,e)};var l={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var c in this.options.headers&&b.extend(l,this.options.headers),l){var d=l[c];d&&n.setRequestHeader(c,d)}var u=new FormData;if(this.options.params){var p=this.options.params;for(var h in"function"==typeof p&&(p=p.call(this,t,n,t[0].upload.chunked?this._getChunk(t[0],n):null)),p){var f=p[h];u.append(h,f)}}for(var m=0,v=v=t;;){if(m>=v.length)break;var g=v[m++];this.emit("sending",g,n,u)}this.options.uploadMultiple&&this.emit("sendingmultiple",t,n,u),this._addFormElementData(u);for(var k=0;k<e.length;k++){var y=e[k];u.append(y.name,y.data,y.filename)}this.submitRequest(n,u,t)}},{key:"_transformFiles",value:function(i,n){for(var e=this,a=[],s=0,t=function(t){e.options.transformFile.call(e,i[t],function(e){a[t]=e,++s===i.length&&n(a)})},r=0;r<i.length;r++)t(r)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName)for(var t=0,i=i=this.element.querySelectorAll("input, textarea, select, button");;){if(t>=i.length)break;var n=i[t++],a=n.getAttribute("name"),s=n.getAttribute("type");if(s&&(s=s.toLowerCase()),null!=a)if("SELECT"===n.tagName&&n.hasAttribute("multiple"))for(var r=0,o=o=n.options;;){if(r>=o.length)break;var l=o[r++];l.selected&&e.append(a,l.value)}else(!s||"checkbox"!==s&&"radio"!==s||n.checked)&&e.append(a,n.value)}}},{key:"_updateFilesUploadProgress",value:function(e,t,i){var n=void 0;if(void 0!==i){if(n=100*i.loaded/i.total,e[0].upload.chunked){var a=e[0],s=this._getChunk(a,t);s.progress=n,s.total=i.total,s.bytesSent=i.loaded;a.upload.progress=0,a.upload.total=0;for(var r=a.upload.bytesSent=0;r<a.upload.totalChunkCount;r++)void 0!==a.upload.chunks[r]&&void 0!==a.upload.chunks[r].progress&&(a.upload.progress+=a.upload.chunks[r].progress,a.upload.total+=a.upload.chunks[r].total,a.upload.bytesSent+=a.upload.chunks[r].bytesSent);a.upload.progress=a.upload.progress/a.upload.totalChunkCount}else for(var o=0,l=l=e;;){if(o>=l.length)break;var c=l[o++];c.upload.progress=n,c.upload.total=i.total,c.upload.bytesSent=i.loaded}for(var d=0,u=u=e;;){if(d>=u.length)break;var p=u[d++];this.emit("uploadprogress",p,p.upload.progress,p.upload.bytesSent)}}else{var h=!0;n=100;for(var f=0,m=m=e;;){if(f>=m.length)break;var v=m[f++];100===v.upload.progress&&v.upload.bytesSent===v.upload.total||(h=!1),v.upload.progress=n,v.upload.bytesSent=v.upload.total}if(h)return;for(var g=0,k=k=e;;){if(g>=k.length)break;var y=k[g++];this.emit("uploadprogress",y,n,y.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(e,t,i){var n=void 0;if(e[0].status!==b.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(n=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{n=JSON.parse(n)}catch(e){i=e,n="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t)):this._finished(e,n,i):this._handleUploadError(e,t,n)}}},{key:"_handleUploadError",value:function(e,t,i){if(e[0].status!==b.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var n=this._getChunk(e[0],t);if(n.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[n.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var a=0,s=s=e;;){if(a>=s.length)break;s[a++];this._errorProcessing(e,i||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}}},{key:"submitRequest",value:function(e,t,i){e.send(t)}},{key:"_finished",value:function(e,t,i){for(var n=0,a=a=e;;){if(n>=a.length)break;var s=a[n++];s.status=b.SUCCESS,this.emit("success",s,t,i),this.emit("complete",s)}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,t,i){for(var n=0,a=a=e;;){if(n>=a.length)break;var s=a[n++];s.status=b.ERROR,this.emit("error",s,t,i),this.emit("complete",s)}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),b}();Dropzone.initClass(),Dropzone.version="5.3.0",Dropzone.options={},Dropzone.optionsForElement=function(e){return e.getAttribute("id")?Dropzone.options[camelize(e.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var s=void 0;if(document.querySelectorAll)s=document.querySelectorAll(".dropzone");else{s=[];var e=function(a){return function(){for(var e=[],t=0,i=i=a;;){if(t>=i.length)break;var n=i[t++];/(^| )dropzone($| )/.test(n.className)?e.push(s.push(n)):e.push(void 0)}return e}()};e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))}return function(){for(var e=[],t=0,i=i=s;;){if(t>=i.length)break;var n=i[t++];!1!==Dropzone.optionsForElement(n)?e.push(new Dropzone(n)):e.push(void 0)}return e}()},Dropzone.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],Dropzone.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var t=0,i=i=Dropzone.blacklistedBrowsers;;){if(t>=i.length)break;i[t++].test(navigator.userAgent)&&(e=!1)}else e=!1;else e=!1;return e},Dropzone.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),a=new Uint8Array(n),s=0,r=t.length,o=0<=r;o?s<=r:r<=s;o?s++:s--)a[s]=t.charCodeAt(s);return new Blob([n],{type:i})};var without=function(e,t){return e.filter(function(e){return e!==t}).map(function(e){return e})},camelize=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};Dropzone.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},Dropzone.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},Dropzone.getElement=function(e,t){var i=void 0;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType&&(i=e),null==i)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},Dropzone.getElements=function(e,t){var i=void 0,n=void 0;if(e instanceof Array){n=[];try{for(var a=0,s=s=e;!(a>=s.length);)i=s[a++],n.push(this.getElement(i,t))}catch(e){n=null}}else if("string"==typeof e){n=[];for(var r=0,o=o=document.querySelectorAll(e);!(r>=o.length);)i=o[r++],n.push(i)}else null!=e.nodeType&&(n=[e]);if(null==n||!n.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},Dropzone.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},Dropzone.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");for(var i=e.type,n=i.replace(/\/.*$/,""),a=0,s=s=t;;){if(a>=s.length)break;var r=s[a++];if("."===(r=r.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(r.toLowerCase(),e.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(n===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new Dropzone(this,e)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success";var detectVerticalSquash=function(e){e.naturalWidth;var t=e.naturalHeight,i=document.createElement("canvas");i.width=1,i.height=t;var n=i.getContext("2d");n.drawImage(e,0,0);for(var a=n.getImageData(1,0,1,t).data,s=0,r=t,o=t;s<o;){0===a[4*(o-1)+3]?r=o:s=o,o=r+s>>1}var l=o/t;return 0===l?1:l},drawImageIOSFix=function(e,t,i,n,a,s,r,o,l,c){var d=detectVerticalSquash(t);return e.drawImage(t,i,n,a,s,r,o,l,c/d)},ExifRestore=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",i=void 0,n=void 0,a="",s=void 0,r=void 0,o=void 0,l="",c=0;s=(i=e[c++])>>2,r=(3&i)<<4|(n=e[c++])>>4,o=(15&n)<<2|(a=e[c++])>>6,l=63&a,isNaN(n)?o=l=64:isNaN(a)&&(l=64),t=t+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l),i=n=a="",s=r=o=l="",c<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var i=this.decode64(e.replace("data:image/jpeg;base64,","")),n=this.slice2Segments(i),a=this.exifManipulation(t,n);return"data:image/jpeg;base64,"+this.encode64(a)}},{key:"exifManipulation",value:function(e,t){var i=this.getExifArray(t),n=this.insertExif(e,i);return new Uint8Array(n)}},{key:"getExifArray",value:function(e){for(var t=void 0,i=0;i<e.length;){if(255===(t=e[i])[0]&225===t[1])return t;i++}return[]}},{key:"insertExif",value:function(e,t){var i=e.replace("data:image/jpeg;base64,",""),n=this.decode64(i),a=n.indexOf(255,3),s=n.slice(0,a),r=n.slice(a),o=s;return o=(o=o.concat(t)).concat(r)}},{key:"slice2Segments",value:function(e){for(var t=0,i=[];;){if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{var n=t+(256*e[t+2]+e[t+3])+2,a=e.slice(t,n);i.push(a),t=n}if(t>e.length)break}return i}},{key:"decode64",value:function(e){var t=void 0,i=void 0,n="",a=void 0,s=void 0,r="",o=0,l=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(o++))<<2|(a=this.KEY_STR.indexOf(e.charAt(o++)))>>4,i=(15&a)<<4|(s=this.KEY_STR.indexOf(e.charAt(o++)))>>2,n=(3&s)<<6|(r=this.KEY_STR.indexOf(e.charAt(o++))),l.push(t),64!==s&&l.push(i),64!==r&&l.push(n),t=i=n="",a=s=r="",o<e.length;);return l}}]),e}();ExifRestore.initClass();var contentLoaded=function(i,n){var a=!1,e=!0,s=i.document,r=s.documentElement,t=s.addEventListener?"addEventListener":"attachEvent",o=s.addEventListener?"removeEventListener":"detachEvent",l=s.addEventListener?"":"on",c=function e(t){if("readystatechange"!==t.type||"complete"===s.readyState)return("load"===t.type?i:s)[o](l+t.type,e,!1),!a&&(a=!0)?n.call(i,t.type||t):void 0};if("complete"!==s.readyState){if(s.createEventObject&&r.doScroll){try{e=!i.frameElement}catch(e){}e&&function t(){try{r.doScroll("left")}catch(e){return void setTimeout(t,50)}return c("poll")}()}return s[t](l+"DOMContentLoaded",c,!1),s[t](l+"readystatechange",c,!1),i[t](l+"load",c,!1)}};function __guard__(e,t){return null!=e?t(e):void 0}function __guardMethod__(e,t,i){return null!=e&&"function"==typeof e[t]?i(e,t):void 0}if(Dropzone._autoDiscoverFunction=function(){if(Dropzone.autoDiscover)return Dropzone.discover()},contentLoaded(window,Dropzone._autoDiscoverFunction),function(te){te.fn.jqte=function(e){function t(e,t,i,n,a){var s=ee.length+1;return ee.push({name:e,cls:s,command:t,key:i,tag:n,emphasis:a})}var J=["0,0,0","68,68,68","102,102,102","153,153,153","204,204,204","238,238,238","243,243,243","255,255,255",null,"255,0,0","255,153,0","255,255,0","0,255,0","0,255,255","0,0,255","153,0,255","255,0,255",null,"244,204,204","252,229,205","255,242,204","217,234,211","208,224,227","207,226,243","217,210,233","234,209,220","234,153,153","249,203,156","255,229,153","182,215,168","162,196,201","159,197,232","180,167,214","213,166,189","224,102,102","246,178,107","255,217,102","147,196,125","118,165,175","111,168,220","142,124,195","194,123,160","204,0,0","230,145,56","241,194,50","106,168,79","69,129,142","61,133,198","103,78,167","166,77,121","153,0,0","180,95,6","191,144,0","56,118,29","19,79,92","11,83,148","53,28,117","116,27,71","102,0,0","120,63,4","127,96,0","39,78,19","12,52,61","7,55,99","32,18,77","76,17,48"],X=te.extend({status:!0,css:"jqte",title:!0,titletext:[{title:"Text Format"},{title:"Font Size"},{title:"Color"},{title:"Bold",hotkey:"B"},{title:"Italic",hotkey:"I"},{title:"Underline",hotkey:"U"},{title:"Ordered List",hotkey:"."},{title:"Unordered List",hotkey:","},{title:"Subscript",hotkey:"down arrow"},{title:"Superscript",hotkey:"up arrow"},{title:"Outdent",hotkey:"left arrow"},{title:"Indent",hotkey:"right arrow"},{title:"Justify Left"},{title:"Justify Center"},{title:"Justify Right"},{title:"Strike Through",hotkey:"K"},{title:"Add Link",hotkey:"L"},{title:"Remove Link"},{title:"Cleaner Style",hotkey:"Delete"},{title:"Horizontal Rule",hotkey:"H"},{title:"Source"}],button:"OK",format:!0,formats:[["p","Normal"],["h1","Header 1"],["h2","Header 2"],["h3","Header 3"],["h4","Header 4"],["h5","Header 5"],["h6","Header 6"],["pre","Preformatted"]],fsize:!0,fsizes:["10","12","16","18","20","24","28"],funit:"px",color:!0,linktypes:["Web Address","E-mail Address","Picture URL"],b:!0,i:!0,u:!0,ol:!0,ul:!0,sub:!0,sup:!0,outdent:!0,indent:!0,left:!0,center:!0,right:!0,strike:!0,link:!0,unlink:!0,remove:!0,rule:!0,source:!0,placeholder:!1,br:!0,p:!0,change:"",focus:"",blur:""},e);te.fn.jqteVal=function(e){te(this).closest("."+X.css).find("."+X.css+"_editor").html(e)};var Z=navigator.userAgent.toLowerCase();/msie [1-7]./.test(Z)&&(X.title=!1);var ee=[];return t("format","formats","","",!1),t("fsize","fSize","","",!1),t("color","colors","","",!1),t("b","Bold","B",["b","strong"],!0),t("i","Italic","I",["i","em"],!0),t("u","Underline","U",["u"],!0),t("ol","insertorderedlist","¾",["ol"],!0),t("ul","insertunorderedlist","¼",["ul"],!0),t("sub","subscript","(",["sub"],!0),t("sup","superscript","&",["sup"],!0),t("outdent","outdent","%",["blockquote"],!1),t("indent","indent","'",["blockquote"],!0),t("left","justifyLeft","","",!1),t("center","justifyCenter","","",!1),t("right","justifyRight","","",!1),t("strike","strikeThrough","K",["strike"],!0),t("link","linkcreator","L",["a"],!0),t("unlink","unlink","",["a"],!1),t("remove","removeformat",".","",!1),t("rule","inserthorizontalrule","H",["hr"],!1),t("source","displaysource","","",!1),this.each(function(){function l(){return window.getSelection?window.getSelection():document.selection&&document.selection.createRange&&"None"!=document.selection.type?document.selection.createRange():void 0}function i(e,t){var i,n=l();window.getSelection?(n.anchorNode&&n.getRangeAt&&(i=n.getRangeAt(0)),i&&(n.removeAllRanges(),n.addRange(i)),Z.match(/msie/)||document.execCommand("StyleWithCSS",!1,!1),document.execCommand(e,!1,t)):document.selection&&document.selection.createRange&&"None"!=document.selection.type&&(i=document.selection.createRange()).execCommand(e,!1,t),c(!1,!1)}function n(e,t,i){if(_.not(":focus")&&_.focus(),window.getSelection){var n,a,s,r=l();r.anchorNode&&r.getRangeAt&&(n=r.getRangeAt(0),a=document.createElement(e),te(a).attr(t,i),s=n.extractContents(),a.appendChild(s),n.insertNode(a),r.removeAllRanges(),c(te(a),"style"==t&&i))}else if(document.selection&&document.selection.createRange&&"None"!=document.selection.type){var o="<"+e+" "+t+'="'+i+'">'+document.selection.createRange().htmlText+"</"+e+">";document.selection.createRange().pasteHTML(o)}}function c(e,t){var i=H();if((i=i||e)&&0==t)i.parent().is("[style]")&&i.attr("style",i.parent().attr("style")),i.is("[style]")&&i.find("*").attr("style",i.attr("style"));else if(e&&t&&e.is("[style]")){var n=t.split(";");n=n[0].split(":"),e.is("[style*="+n[0]+"]")&&e.find("*").css(n[0],n[1]),a(e)}}function a(e){if(e){e=e[0];if(document.body.createTextRange)(i=document.body.createTextRange()).moveToElementText(e),i.select();else if(window.getSelection){var t=window.getSelection(),i=document.createRange();"undefined"!=e&&null!=e&&(i.selectNodeContents(e),t.removeAllRanges(),t.addRange(i),te(e).is(":empty")&&(te(e).append(" "),a(te(e))))}}}function s(){if(w.data("sourceOpened"))o(!1);else{var e=H(),t="http://";if(o(!0),e)"a"==e.prop("tagName").toLowerCase()&&e.is("[href]")?(t=e.attr("href"),e.attr(M,"")):n("a",M,"");else E.val(t).focus();F.click(function(e){(te(e.target).hasClass(X.css+"_linktypetext")||te(e.target).hasClass(X.css+"_linktypearrow"))&&d(!0)}),S.find("a").click(function(){var e=te(this).attr(X.css+"-linktype");S.data("linktype",e),D.find("."+X.css+"_linktypetext").html(S.find("a:eq("+S.data("linktype")+")").text()),u(t),d()}),u(t),E.focus().val(t).bind("keypress keyup",function(e){if(13==e.keyCode)return r(b.find("["+M+"]")),!1}),z.click(function(){r(b.find("["+M+"]"))})}}function r(e){E.focus(),a(e),e.removeAttr(M),"2"!=S.data("linktype")?i("createlink",E.val()):(i("insertImage",E.val()),_.find("img").each(function(){var e=te(this).prev("a"),t=te(this).next("a");0<e.length&&""==e.html()?e.remove():0<t.length&&""==t.html()&&t.remove()})),o(),_.trigger("change")}function o(e){var t;t="["+M+"]:not([href])",b.find(t).each(function(){te(this).before(te(this).html()).remove()}),b.find("["+M+"][href]").removeAttr(M),e?(w.data("linkOpened",!0),C.show()):(w.data("linkOpened",!1),C.hide()),d()}function d(e){e?S.show():S.hide()}function u(e){var t=S.data("linktype");"1"!=t||"http://"!=E.val()&&!E.is("[value^=http://]")&&E.is("[value^=mailto]")?"1"==t||E.is("[value^=http://]")?E.val(e):E.val("http://"):E.val("mailto:")}function t(i){w.data("sourceOpened")?p(styleField,!1):("fSize"==i?styleField=q:"colors"==i&&(styleField=B),p(styleField,!0),styleField.find("a").unbind("click").click(function(){var e=te(this).attr(X.css+"-styleval");"fSize"==i?(styleType="font-size",e+=X.funit):"colors"==i&&(styleType="color",e="rgb("+e+")");var t=function(e){var t=H();{if(t&&t.is("[style]")&&""!=t.css(e)){var i=t.css(e);t.css(e,"");var n=t.attr("style");return t.css(e,i),n}return""}}(styleType);n("span","style",styleType+":"+e+";"+t),p("",!1),te("."+X.css+"_title").remove(),_.trigger("change")})),o(!1)}function p(e,t){var i="",n=[{d:"fsizeOpened",f:q},{d:"cpallOpened",f:B}];if(""!=e)for(var a=0;a<n.length;a++)e==n[a].f&&(i=n[a]);if(t){w.data(i.d,!0),i.f.slideDown(100);for(a=0;a<n.length;a++)i.d!=n[a].d&&(w.data(n[a].d,!1),n[a].f.slideUp(100))}else for(a=0;a<n.length;a++)w.data(n[a].d,!1),n[a].f.slideUp(100)}function h(e){!(!e||!j.data("status"))||!e?j.data("status",!1).slideUp(200):j.data("status",!0).slideDown(200)}function f(e){var t=j.closest("."+X.css+"_tool").find("."+X.css+"_tool_label").find("."+X.css+"_tool_text");10<e.length&&(e=e.substr(0,7)+"..."),t.html(e)}function m(e){var t,i,n;for(t=e.replace(/\n/gim,"").replace(/\r/gim,"").replace(/\t/gim,"").replace(/ /gim," "),i=[/\<span(|\s+.*?)><span(|\s+.*?)>(.*?)<\/span><\/span>/gim,/<(\w*[^p])\s*[^\/>]*>\s*<\/\1>/gim,/\<div(|\s+.*?)>(.*?)\<\/div>/gim,/\<strong(|\s+.*?)>(.*?)\<\/strong>/gim,/\<em(|\s+.*?)>(.*?)\<\/em>/gim],n=["<span$2>$3</span>","","<p$1>$2</p>","<b$1>$2</b>","<i$1>$2</i>"],N=0;N<5;N++)for(var a=0;a<i.length;a++)t=t.replace(i[a],n[a]);if(X.p||(t=t.replace(/\<p(|\s+.*?)>(.*?)\<\/p>/gi,"<br/>$2")),!X.br){i=[/\<br>(.*?)/gi,/\<br\/>(.*?)/gi],n=["<p>$1</p>","<p>$1</p>"];for(a=0;a<i.length;a++)t=t.replace(i[a],n[a])}return X.p||X.br||(t=t.replace(/\<p>(.*?)\<\/p>/gi,"<div>$1</div>")),t}function e(){var e=""==_.text()&&_.html().length<12?"":_.html();k.val(m(e))}function v(){_.html(m(k.val()))}function g(e){var i=!1,n=H();return!!n&&(te.each(e,function(e,t){n.prop("tagName").toLowerCase()==t?i=!0:n.parents().each(function(){te(this).prop("tagName").toLowerCase()==t&&(i=!0)})}),i)}if(te(this).data("jqte")&&null!=te(this).data("jqte")&&"undefined"!=te(this).data("jqte")?te(this).data("jqte",!1):te(this).data("jqte",!0),X.status&&te(this).data("jqte")){var k=te(this);V=te(this).prop("tagName").toLowerCase();te(this).attr("data-origin",V);var y=te(this).is("[value]")||"textarea"==V?te(this).val():te(this).html();y=y.replace(/&#34;/g,'"').replace(/&#39;/g,"'").replace(/</g,"<").replace(/>/g,">").replace(/&/g,"&"),te(this).after('<div class="'+X.css+'"></div>');var b=te(this).next("."+X.css);b.html('<div class="'+X.css+'_toolbar" role="toolbar" unselectable></div><div class="'+X.css+'_linkform" style="display:none" role="dialog"></div><div class="'+X.css+'_editor"></div>');var w=b.find("."+X.css+"_toolbar"),C=b.find("."+X.css+"_linkform"),_=b.find("."+X.css+"_editor"),x=X.css+"_tool_depressed";C.append('<div class="'+X.css+'_linktypeselect" unselectable></div><input class="'+X.css+'_linkinput" type="text/css" value=""><div class="'+X.css+'_linkbutton" unselectable>'+X.button+'</div> <div style="height:1px;float:none;clear:both"></div>');var F=C.find("."+X.css+"_linktypeselect"),E=C.find("."+X.css+"_linkinput"),z=C.find("."+X.css+"_linkbutton");F.append('<div class="'+X.css+'_linktypeview" unselectable></div><div class="'+X.css+'_linktypes" role="menu" unselectable></div>');var S=F.find("."+X.css+"_linktypes"),D=F.find("."+X.css+"_linktypeview"),M=X.css+"-setlink";_.after('<div class="'+X.css+"_source "+X.css+'_hiddenField"></div>');var A=b.find("."+X.css+"_source");if(k.appendTo(A),"textarea"!=V){Q="";te(k[0].attributes).each(function(){"type"!=this.nodeName&&"value"!=this.nodeName&&(Q=Q+" "+this.nodeName+'="'+this.nodeValue+'"')}),k.replaceWith("<textarea "+Q+">"+y+"</textarea>"),k=A.find("textarea")}_.attr("contenteditable","true").html(y);for(var L=0;L<ee.length;L++)if(X[ee[L].name]){var T=0<ee[L].key.length&&null!=X.titletext[L].hotkey&&"undefined"!=X.titletext[L].hotkey&&""!=X.titletext[L].hotkey?" (Ctrl+"+X.titletext[L].hotkey+")":"",R=null!=X.titletext[L].title&&"undefined"!=X.titletext[L].title&&""!=X.titletext[L].title?X.titletext[L].title+T:"";if(w.append('<div class="'+X.css+"_tool "+X.css+"_tool_"+ee[L].cls+'" role="button" data-tool="'+L+'" unselectable><a class="'+X.css+'_tool_icon" unselectable></a></div>'),w.find("."+X.css+"_tool[data-tool="+L+"]").data({tag:ee[L].tag,command:ee[L].command,emphasis:ee[L].emphasis,title:R}),"format"==ee[L].name&&te.isArray(X.formats)){var I=0<X.formats[0][1].length&&"undefined"!=X.formats[0][1]?X.formats[0][1]:"";w.find("."+X.css+"_tool_"+ee[L].cls).find("."+X.css+"_tool_icon").replaceWith('<a class="'+X.css+'_tool_label" unselectable><span class="'+X.css+'_tool_text" unselectable>'+I+'</span><span class="'+X.css+'_tool_icon" unselectable></span></a>'),w.find("."+X.css+"_tool_"+ee[L].cls).append('<div class="'+X.css+'_formats" unselectable></div>');for(var $=0;$<X.formats.length;$++)w.find("."+X.css+"_formats").append("<a "+X.css+'-formatval="'+X.formats[$][0]+'" class="'+X.css+"_format "+X.css+"_format_"+$+'" role="menuitem" unselectable>'+X.formats[$][1]+"</a>");w.find("."+X.css+"_formats").data("status",!1)}else if("fsize"==ee[L].name&&te.isArray(X.fsizes)){w.find("."+X.css+"_tool_"+ee[L].cls).append('<div class="'+X.css+'_fontsizes" unselectable></div>');for($=0;$<X.fsizes.length;$++)w.find("."+X.css+"_fontsizes").append("<a "+X.css+'-styleval="'+X.fsizes[$]+'" class="'+X.css+'_fontsize" style="font-size:'+X.fsizes[$]+X.funit+'" role="menuitem" unselectable>Abcdefgh...</a>')}else if("color"==ee[L].name&&te.isArray(J)){w.find("."+X.css+"_tool_"+ee[L].cls).append('<div class="'+X.css+'_cpalette" unselectable></div>');for(var N=0;N<J.length;N++)null!=J[N]?w.find("."+X.css+"_cpalette").append("<a "+X.css+'-styleval="'+J[N]+'" class="'+X.css+'_color" style="background-color: rgb('+J[N]+')" role="gridcell" unselectable></a>'):w.find("."+X.css+"_cpalette").append('<div class="'+X.css+'_colorSeperator"></div>')}}S.data("linktype","0");for(L=0;L<3;L++)S.append("<a "+X.css+'-linktype="'+L+'" unselectable>'+X.linktypes[L]+"</a>"),D.html('<div class="'+X.css+'_linktypearrow" unselectable></div><div class="'+X.css+'_linktypetext">'+S.find("a:eq("+S.data("linktype")+")").text()+"</div>");var O="";if(O=/msie/.test(Z)?"-ms-":/chrome/.test(Z)||/safari/.test(Z)||/yandex/.test(Z)?"-webkit-":/mozilla/.test(Z)?"-moz-":/opera/.test(Z)?"-o-":/konqueror/.test(Z)?"-khtml-":"",X.placeholder&&""!=X.placeholder){b.prepend('<div class="'+X.css+'_placeholder" unselectable><div class="'+X.css+'_placeholder_text">'+X.placeholder+"</div></div>");var U=b.find("."+X.css+"_placeholder");U.click(function(){_.focus()})}b.find("[unselectable]").css(O+"user-select","none").addClass("unselectable").attr("unselectable","on").on("selectstart mousedown",!1);var P=w.find("."+X.css+"_tool"),j=w.find("."+X.css+"_formats"),q=w.find("."+X.css+"_fontsizes"),B=w.find("."+X.css+"_cpalette"),H=function(){var e,t;if(window.getSelection&&(e=(t=getSelection()).anchorNode),!e&&document.selection&&document.selection.createRange&&"None"!=document.selection.type){var i=(t=document.selection).getRangeAt?t.getRangeAt(0):t.createRange();e=i.commonAncestorContainer?i.commonAncestorContainer:i.parentElement?i.parentElement():i.item(0)}return!!e&&("#text"==e.nodeName?te(e.parentNode):te(e))};P.unbind("click").click(function(e){"displaysource"!=te(this).data("command")||w.data("sourceOpened")?(w.data("sourceOpened")?(w.data("sourceOpened",!1),w.find("."+X.css+"_tool").removeClass(X.css+"_hiddenField"),A.addClass(X.css+"_hiddenField"),_.removeClass(X.css+"_hiddenField")):"linkcreator"==te(this).data("command")?w.data("linkOpened")?(o(!1),h(!1)):s():"formats"==te(this).data("command")?("formats"!=te(this).data("command")||te(e.target).hasClass(X.css+"_format")||(h(!0),j.find("a").click(function(){te("*",this).click(function(e){return e.preventDefault(),!1}),f(te(this).text()),i("formatBlock","<"+te(this).attr(X.css+"-formatval")+">"),h(!1)})),p("",!1),_.not(":focus")&&_.focus()):"fSize"==te(this).data("command")||"colors"==te(this).data("command")?(("fSize"==te(this).data("command")&&!te(e.target).hasClass(X.css+"_fontsize")||"colors"==te(this).data("command")&&!te(e.target).hasClass(X.css+"_color"))&&t(te(this).data("command")),h(!1),_.not(":focus")&&_.focus()):(_.not(":focus")&&_.focus(),i(te(this).data("command"),null),p("",!1),h(!1),d(),1!=te(this).data("emphasis")||te(this).hasClass(x)?te(this).removeClass(x):te(this).addClass(x),A.addClass(X.css+"_hiddenField"),_.removeClass(X.css+"_hiddenField")),X.placeholder&&""!=X.placeholder&&(""!=_.html()?U.hide():U.show())):(w.find("."+X.css+"_tool").addClass(X.css+"_hiddenField"),te(this).removeClass(X.css+"_hiddenField"),w.data("sourceOpened",!0),k.css("height",_.outerHeight()),A.removeClass(X.css+"_hiddenField"),_.addClass(X.css+"_hiddenField"),k.focus(),o(!1),p("",!1),h(),X.placeholder&&""!=X.placeholder&&U.hide()),_.trigger("change")}).hover(function(e){if(X.title&&""!=te(this).data("title")&&(te(e.target).hasClass(X.css+"_tool")||te(e.target).hasClass(X.css+"_tool_icon"))){te("."+X.css+"_title").remove(),b.append('<div class="'+X.css+'_title"><div class="'+X.css+'_titleArrow"><div class="'+X.css+'_titleArrowIcon"></div></div><div class="'+X.css+'_titleText">'+te(this).data("title")+"</div></div>");var t=te("."+X.css+"_title:first"),i=(t.find("."+X.css+"_titleArrowIcon"),te(this).position()),n=i.left+te(this).outerWidth()-t.outerWidth()/2-te(this).outerWidth()/2,a=i.top+te(this).outerHeight()+5;t.delay(400).css({top:a,left:n}).fadeIn(200)}},function(){te("."+X.css+"_title").remove()});var W=null;_.bind("keypress keyup keydown drop cut copy paste DOMCharacterDataModified DOMSubtreeModified",function(){w.data("sourceOpened")||te(this).trigger("change"),d(),te.isFunction(X.change)&&X.change(),X.placeholder&&""!=X.placeholder&&(""!=te(this).text()?U.hide():U.show())}).bind("change",function(){w.data("sourceOpened")||(clearTimeout(W),W=setTimeout(e,10))}).keydown(function(e){if(e.ctrlKey)for(var t=0;t<ee.length;t++)if(X[ee[t].name]&&e.keyCode==ee[t].key.charCodeAt(0))return""!=ee[t].command&&"linkcreator"!=ee[t].command?i(ee[t].command,null):"linkcreator"==ee[t].command&&s(),!1}).bind("mouseup keyup",function(e){for(var t=0;t<ee.length;t++)X[ee[t].name]&&ee[t].emphasis&&""!=ee[t].tag&&(g(ee[t].tag)?w.find("."+X.css+"_tool_"+ee[t].cls).addClass(x):te("."+X.css+"_tool_"+ee[t].cls).removeClass(x));if(X.format&&te.isArray(X.formats)){for(var i=!1,n=0;n<X.formats.length;n++){var a=[];if(a[0]=X.formats[n][0],0<X.formats[n][0].length&&g(a)){f(X.formats[n][1]),i=!0;break}}i||f(X.formats[0][1])}p("",!1),h(!1)}).focus(function(){if(te.isFunction(X.focus)&&X.focus(),b.addClass(X.css+"_focused"),/opera/.test(Z)){var e=document.createRange();e.selectNodeContents(_[0]),e.collapse(!1);var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}}).focusout(function(){P.removeClass(x),p("",!1),h(!1),d(),te.isFunction(X.blur)&&X.blur(),b.removeClass(X.css+"_focused"),te.isArray(X.formats)&&f(X.formats[0][1])}),k.bind("keydown keyup",function(){setTimeout(v,0),te(this).height(te(this)[0].scrollHeight),""==te(this).val()&&te(this).height(0)}).focus(function(){b.addClass(X.css+"_focused")}).focusout(function(){b.removeClass(X.css+"_focused")})}else if(0<te(this).closest("."+X.css).length){var G=te(this).closest("."+X.css).find("."+X.css+"_editor").html(),Q="";te(te(this)[0].attributes).each(function(){"style"!=this.nodeName&&(Q=Q+" "+this.nodeName+'="'+this.nodeValue+'"')});var V,K=">"+G;"input"!=(V=te(this).is("[data-origin]")&&""!=te(this).attr("data-origin")?te(this).attr("data-origin"):"textarea")&&"option"!=V||(K='value="'+(G=G.replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"<").replace(/>/g,">"))+'">');var Y=te(this).clone();te(this).data("jqte",!1).closest("."+X.css).before(Y).remove(),Y.replaceWith("<"+V+Q+K+"</"+V+">")}})}}(jQuery),"function"!=typeof loadMaskPlugin){function loadMaskPlugin(){var e,t,i,s={scope:{},findInternal:function(e,t,i){e instanceof String&&(e=String(e));for(var n=e.length,a=0;a<n;a++){var s=e[a];if(t.call(i,s,a,e))return{i:a,v:s}}return{i:-1,v:void 0}}};s.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){if(i.get||i.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=i.value)},s.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e},s.global=s.getGlobal(this),s.polyfill=function(e,t,i,n){if(t){for(i=s.global,e=e.split("."),n=0;n<e.length-1;n++){var a=e[n];a in i||(i[a]={}),i=i[a]}(t=t(n=i[e=e[e.length-1]]))!=n&&null!=t&&s.defineProperty(i,e,{configurable:!0,writable:!0,value:t})}},s.polyfill("Array.prototype.find",function(e){return e||function(e,t){return s.findInternal(this,e,t).v}},"es6-impl","es3"),e=function(r){var o=function(c,y,b){var w={invalid:[],getCaret:function(){try{var e,t=0,i=c.get(0),n=document.selection,a=i.selectionStart;return n&&-1===navigator.appVersion.indexOf("MSIE 10")?((e=n.createRange()).moveStart("character",-w.val().length),t=e.text.length):(a||"0"===a)&&(t=a),t}catch(e){}},setCaret:function(e){try{if(c.is(":focus")){var t,i=c.get(0);i.setSelectionRange?i.setSelectionRange(e,e):((t=i.createTextRange()).collapse(!0),t.moveEnd("character",e),t.moveStart("character",e),t.select())}}catch(e){}},events:function(){c.on("keydown.mask",function(e){c.data("mask-keycode",e.keyCode||e.which),c.data("mask-previus-value",c.val()),c.data("mask-previus-caret-pos",w.getCaret()),w.maskDigitPosMapOld=w.maskDigitPosMap}).on(r.jMaskGlobals.useInput?"input.mask":"keyup.mask",w.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){c.keydown().keyup()},100)}).on("change.mask",function(){c.data("changed",!0)}).on("blur.mask",function(){s===w.val()||c.data("changed")||c.trigger("change"),c.data("changed",!1)}).on("blur.mask",function(){s=w.val()}).on("focus.mask",function(e){!0===b.selectOnFocus&&r(e.target).select()}).on("focusout.mask",function(){b.clearIfNotMatch&&!n.test(w.val())&&w.val("")})},getRegexMask:function(){for(var e,t,i,n,a=[],s=0;s<y.length;s++)(e=C.translation[y.charAt(s)])?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),i=e.optional,(e=e.recursive)?(a.push(y.charAt(s)),n={digit:y.charAt(s),pattern:t}):a.push(i||e?t+"?":t)):a.push(y.charAt(s).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return a=a.join(""),n&&(a=a.replace(new RegExp("("+n.digit+"(.*"+n.digit+")?)"),"($1)?").replace(new RegExp(n.digit,"g"),n.pattern)),new RegExp(a)},destroyEvents:function(){c.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(e){var t=c.is("input")?"val":"text";return 0<arguments.length?(c[t]()!==e&&c[t](e),t=c):t=c[t](),t},calculateCaretPosition:function(){var e=c.data("mask-previus-value")||"",t=w.getMasked(),i=w.getCaret();if(e!==t){var n,a=c.data("mask-previus-caret-pos")||0,s=(t=t.length,e.length),r=e=0,o=0,l=0;for(n=i;n<t&&w.maskDigitPosMap[n];n++)r++;for(n=i-1;0<=n&&w.maskDigitPosMap[n];n--)e++;for(n=i-1;0<=n;n--)w.maskDigitPosMap[n]&&o++;for(n=a-1;0<=n;n--)w.maskDigitPosMapOld[n]&&l++;s<i?i=10*t:i<=a&&a!==s?w.maskDigitPosMapOld[i]||(i=(a=i)-(l-o)-e,w.maskDigitPosMap[i]&&(i=a)):a<i&&(i=i+(o-l)+r)}return i},behaviour:function(e){e=e||window.event,w.invalid=[];var t=c.data("mask-keycode");if(-1===r.inArray(t,C.byPassKeys)){t=w.getMasked();var i=w.getCaret();return setTimeout(function(){w.setCaret(w.calculateCaretPosition())},10),w.val(t),w.setCaret(i),w.callbacks(e)}},getMasked:function(e,t){var i,n,a,s=[],r=void 0===t?w.val():t+"",o=0,l=y.length,c=0,d=r.length,u=1,p="push",h=-1,f=0,m=[];for(b.reverse?(p="unshift",u=-1,i=0,o=l-1,c=d-1,n=function(){return-1<o&&-1<c}):(i=l-1,n=function(){return o<l&&c<d});n();){var v=y.charAt(o),g=r.charAt(c),k=C.translation[v];k?(g.match(k.pattern)?(s[p](g),k.recursive&&(-1===h?h=o:o===i&&o!==h&&(o=h-u),i===h&&(o-=u)),o+=u):g===a?(f--,a=void 0):k.optional?(o+=u,c-=u):k.fallback?(s[p](k.fallback),o+=u,c-=u):w.invalid.push({p:c,v:g,e:k.pattern}),c+=u):(e||s[p](v),g===v?(m.push(c),c+=u):(a=v,m.push(c+f),f++),o+=u)}return r=y.charAt(i),l!==d+1||C.translation[r]||s.push(r),s=s.join(""),w.mapMaskdigitPositions(s,m,d),s},mapMaskdigitPositions:function(e,t,i){for(e=b.reverse?e.length-i:0,w.maskDigitPosMap={},i=0;i<t.length;i++)w.maskDigitPosMap[t[i]+e]=1},callbacks:function(e){var t=w.val(),i=t!==s,n=[t,e,c,b],a=function(e,t,i){"function"==typeof b[e]&&t&&b[e].apply(this,i)};a("onChange",!0===i,n),a("onKeyPress",!0===i,n),a("onComplete",t.length===y.length,n),a("onInvalid",0<w.invalid.length,[t,e,c,w.invalid,b])}};c=r(c);var n,C=this,s=w.val();y="function"==typeof y?y(w.val(),void 0,c,b):y,C.mask=y,C.options=b,C.remove=function(){var e=w.getCaret();return w.destroyEvents(),w.val(C.getCleanVal()),w.setCaret(e),c},C.getCleanVal=function(){return w.getMasked(!0)},C.getMaskedVal=function(e){return w.getMasked(!1,e)},C.init=function(e){if(e=e||!1,b=b||{},C.clearIfNotMatch=r.jMaskGlobals.clearIfNotMatch,C.byPassKeys=r.jMaskGlobals.byPassKeys,C.translation=r.extend({},r.jMaskGlobals.translation,b.translation),C=r.extend(!0,{},C,b),n=w.getRegexMask(),e)w.events(),w.val(w.getMasked());else{b.placeholder&&c.attr("placeholder",b.placeholder),c.data("mask")&&c.attr("autocomplete","off");for(var t=!(e=0);e<y.length;e++){var i=C.translation[y.charAt(e)];if(i&&i.recursive){t=!1;break}}t&&c.attr("maxlength",y.length),w.destroyEvents(),w.events(),e=w.getCaret(),w.val(w.getMasked()),w.setCaret(e)}},C.init(!c.is("input"))};r.maskWatchers={};var t=function(){var e=r(this),t={},i=e.attr("data-mask");if(e.attr("data-mask-reverse")&&(t.reverse=!0),e.attr("data-mask-clearifnotmatch")&&(t.clearIfNotMatch=!0),"true"===e.attr("data-mask-selectonfocus")&&(t.selectOnFocus=!0),l(e,i,t))return e.data("mask",new o(this,i,t))},l=function(e,t,i){i=i||{};var n=r(e).data("mask"),a=JSON.stringify;e=r(e).val()||r(e).text();try{return"function"==typeof t&&(t=t(e)),"object"!=typeof n||a(n.options)!==a(i)||n.mask!==t}catch(e){}},e=function(e){var t,i=document.createElement("div");return(t=(e="on"+e)in i)||(i.setAttribute(e,"return;"),t="function"==typeof i[e]),t};r.fn.mask=function(e,t){t=t||{};var i=this.selector,n=(a=r.jMaskGlobals).watchInterval,a=t.watchInputs||a.watchInputs,s=function(){if(l(this,e,t))return r(this).data("mask",new o(this,e,t))};return r(this).each(s),i&&""!==i&&a&&(clearInterval(r.maskWatchers[i]),r.maskWatchers[i]=setInterval(function(){r(document).find(i).each(s)},n)),this},r.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},r.fn.unmask=function(){return clearInterval(r.maskWatchers[this.selector]),delete r.maskWatchers[this.selector],this.each(function(){var e=r(this).data("mask");e&&e.remove().removeData("mask")})},r.fn.cleanVal=function(){return this.data("mask").getCleanVal()},r.applyDataMask=function(e){((e=e||r.jMaskGlobals.maskElements)instanceof r?e:r(e)).filter(r.jMaskGlobals.dataMaskAttr).each(t)},e={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&e("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}},r.jMaskGlobals=r.jMaskGlobals||{},(e=r.jMaskGlobals=r.extend(!0,{},e,r.jMaskGlobals)).dataMask&&r.applyDataMask(),setInterval(function(){r.jMaskGlobals.watchDataMask&&r.applyDataMask()},e.watchInterval)},t=window.jQuery,i=window.Zepto,"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t||i)}loadMaskPlugin()}if("function"!=typeof loadMask){var SPMaskBehavior=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},spOptions={onKeyPress:function(e,t,i,n){i.mask(SPMaskBehavior.apply({},arguments),n)}};function loadMask(){$(".telefone").mask(SPMaskBehavior,spOptions),$(".rg").mask("9999999999",{reverse:!0}),$(".ie").mask("999.999.999.999",{reverse:!0}),$(".cpf").mask("999.999.999-99",{reverse:!0}),$(".cnpj").mask("99.999.999/9999-99",{reverse:!0}),$(".cep").mask("99999-999",{reverse:!0}),$(".valor").mask("#.##0,00",{reverse:!0}),$(".date_time").mask("00/00/0000 00:00:00")}}if("function"!=typeof openPanel)function openPanel(e,t,i,n){n.panel(themeWindow("<i class='statusPanel left' title='sem mudanças'></i><span class='left'>Editar "+ucFirst(e)+"</span>",{lib:"form-crud",file:"read/form",entity:e,id:i},function(e){ISDEV&&console.log("id ontab retorno: \n"+e),formSubmit($("#"+e).find(".ontab-content").find(".form-crud"),t)}))}if("function"!=typeof formGetData)function formGetData(e){function t(e,t){return"checkbox"===e.attr("type")?(n=t,(i=e).hasClass("switchCheck")?i.prop("checked")?1:0:(n||(n=[]),i.prop("checked")?n.push(parseInt(i.val())):n.removeItem(i.val()),n)):"html"===e.attr("type")?e.jqteVal():"radio"!==e.attr("type")?e.is(".telefone, .rg, .ie, .cpf, .cnpj, .cep, .valor, .date_time")&&""!==e.val()?e.cleanVal():e.val():e.prop("checked")?e.val():t||void 0;var i,n}var i={};return e.find("input, textarea, select").each(function(){void 0!==$(this).attr("data-model")&&(i[$(this).attr("data-model")]=t($(this),void 0!==i[$(this).attr("data-model")]?i[$(this).attr("data-model")]:null))}),i}if("function"!=typeof formSubmit){var saveTime,isSavingNew=!1;function setError(a,e,s,r){isSavingNew=!1,r=r||"dados.",$.each(e,function(e,t){if("object"==typeof t)setError(a,t,s,r+e+".");else{var i=s?"red":"goldenrod",n=a.find("[data-model='"+(r+e)+"']");"radio"===n.attr("data-format")?(n.siblings(".md-radio--fake").css("border-color",i),n.parent().siblings(".radio-title").addClass(i+"-span")):"list"===n.attr("data-format")?(n.parent().parent().prev().addClass(i+"-span"),n.siblings(".listButton").parent().siblings(".rest").find("input[type=text]").siblings(".error-message").remove(),n.parent().siblings(".rest").append('<span class="'+i+'-span error-message">'+t+"</span>")):(n.siblings("label").addClass(i+"-span"),n.siblings(".error-message").remove(),n.addClass(i+"-subErro").parent().append('<span class="'+i+'-span error-message">'+t+"</span>"))}})}function cleanError(e){e.find(".error-span").removeClass("error-span red-span goldenrod-span"),e.find(".md-radio--fake").css("border-color","initial"),e.find(".radio-title").removeClass("error-span red-span goldenrod-span"),e.find(".listButton").removeClass("error-btn"),e.find(".error-message").remove(),e.find("input,textarea,select").removeClass("red-subErro goldenrod-subErro").siblings("label").removeClass("error-span red-span goldenrod-span").siblings(".error-message").remove()}function reloadForm(n,e){e=e||null,$("#form_"+n).closest(".ontab").loading();var t=$("#fields-"+n).val();post("form-crud","children/form",{entity:n,id:e,fields:t},function(e){if(e){var t=$("#form_"+n).closest(".form-control");$input=t.find(":focus");var i=$input.val();t.html(e).find("input[data-model='"+$input.attr("data-model")+"']").focus().val("").val(i),t.closest(".ontab").loading(),isSavingNew=!1,statusPanel("salvo",t)}})}function formSave(t,e){var i=formGetData(t);isSavingNew=""===i["dados.id"],ISDEV&&console.log(i),post("form-crud","save/form",{entity:t.attr("data-entity"),dados:i,save:void 0!==e?e:t.find("#autoSave").val()},function(e){cleanError(t),isNaN(e)?(setError(t,e[t.attr("data-entity")],""===i["dados.id"]),statusPanel(""===i["dados.id"]?"error":"salvo",t)):(null!==e||t.find("#autoSave").val())&&(""===i["dados.id"]?reloadForm(t.attr("data-entity"),e):statusPanel("salvo",t),""!==$("#callbackAction").val()&&window[$("#callbackAction").val()](i)),saveTime||(window.onbeforeunload=null)},!!ISDEV||"undefined")}function statusPanel(e,t){var i=t.closest(".ontab").find(".ontab-header .ontab-title .statusPanel");"change"===e?i.css("background","orange").attr("title","alterações não salvas"):"error"===e?i.css("background","red").attr("title","erros não salvos"):i.css("background","#32cd32").attr("title","salvo")}function formSubmit(i,n){clearTimeout(saveTime),statusPanel("change",i),window.onbeforeunload=function(){return clearTimeout(saveTime),formSave(i),!(window.onbeforeunload=null)},void 0!==n?post("form-crud",i.attr("data-action"),{entity:i.attr("data-entity"),dados:formGetData(i)},function(e){var t=i.find("[data-model='dados."+i.find("input[type=hidden][rel='title']").val()+"']").val();-1<["list_mult","extend_mult","selecao_mult","list","selecao"].indexOf(n.attr("data-format"))&&checkEntityMultValue(n),-1<["list_mult","extend_mult","selecao_mult"].indexOf(n.attr("data-format"))?!isNaN(e)&&0<e&&setListMultValue(n,e,t):(!isNaN(e)&&0<e&&n.val()!==e?n.val(e).trigger("change"):""===n.val()&&""!==i.find("input[type=hidden][data-model='dados.id']").val()&&n.val(i.find("input[type=hidden][data-model='dados.id']").val()).trigger("change"),""!==n.val()&&"string"==typeof i.find("input[type=hidden][rel='title']").val()&&n.parent().siblings(".rest").find("input[type=text]").val(t)),window.onbeforeunload=null},!!ISDEV||"undefined"):isSavingNew||(saveTime=setTimeout(function(){saveTime=null,formSave(i)},400))}}if("function"!=typeof formAutoSubmit){function formAutoSubmit(e){$(e).off("keyup change",".jqte_editor").on("keyup change",".jqte_editor",function(e){void 0!==e.which&&[13,37,38,39,40,116].indexOf(e.which)<0&&formSubmit($(this).closest(".form-crud"))}).off("keyup","input, textarea, select").on("keyup","input, textarea, select",function(e){void 0!==e.which&&[13,37,38,39,40,116].indexOf(e.which)<0&&"string"==typeof $(this).attr("data-model")?formSubmit($(this).closest(".form-crud")):void 0!==e.which&&""===$(this).val()&&$(this).hasClass("form-list")&&($(this).parent().prev().find("input[type=hidden]").val("").trigger("change"),$.each($(this).parent().next(".multFieldsSelect").find(".selecaoUniqueCard"),function(){$(this).find(".titleRequired").removeClass("hide").parent().next().find(".form-list").prop("disabled",!0).addClass("disabled").val("").trigger("change")}))}).off("change","input, textarea, select").on("change","input, textarea, select",function(){"string"==typeof $(this).attr("data-model")?formSubmit($(this).closest(".form-crud")):""===$(this).val()&&$(this).hasClass("form-list")&&($(this).parent().prev().find("input[type=hidden]").val("").trigger("change"),$.each($(this).parent().next(".multFieldsSelect").find(".selecaoUniqueCard"),function(){$(this).find(".titleRequired").removeClass("hide").parent().next().find(".form-list").prop("disabled",!0).addClass("disabled").val("").trigger("change")}))}).off("click",".listButton").on("click",".listButton",function(){openPanel($(this).attr("data-entity"),$(this).siblings("input[type=hidden]"),$(this).siblings("input[type=hidden]").val(),$(this))}).off("keypress keydown","button").on("keypress keydown","button",function(e){e.preventDefault()}).off("keyup",".form-list").on("keyup",".form-list",function(e){var t=$(this);if(-1<[38,40,13].indexOf(e.which)){var i=t.siblings(".list-complete");38===e.which?i.find("li.active").prev().length&&i.find("li.active").removeClass("active").prev().addClass("active"):40===e.which?i.find("li.active").next().length&&i.find("li.active").removeClass("active").next().addClass("active"):13===e.which&&selectList(i)}else[37,39].indexOf(e.which)<0&&(""!==t.val()?readList(t,t.attr("data-entity"),t.attr("data-parent"),t.val(),t.attr("id")):(t.siblings(".list-complete").html(""),$("#list-"+t.attr("id")).removeClass("color-white").addClass("color-teal").find("i").html("add")))}).off("dblclick",".form-list").on("dblclick",".form-list",function(){$(this).prop("disabled")||readList($(this),$(this).attr("data-entity"),$(this).attr("data-parent"),$(this).val(),$(this).attr("id"))}).off("focusout",".form-list").on("focusout",".form-list",function(){$this=$(this),setTimeout(function(){$(".list-complete").html("")},50)}),$(".editorHtml").jqte(),$(".dropzone").length&&$(".dropzone").each(function(){var t=$(this),a=t.siblings("input[type=hidden]"),e=a.attr("data-format");new Dropzone("#"+t.attr("id"),{acceptedFiles:t.find("input[type=file]").attr("accept"),uploadMultiple:"files"===e,maxFiles:"files"===e?20:1,addRemoveLinks:!0,maxFilesize:500,dictDefaultMessage:"Selecione ou Arraste Arquivos",dictCancelUpload:"Cancelar",dictRemoveFile:"Excluir",dictInvalidFileType:"Tipo não Permitido",dictFileTooBig:"Máximo de 500MB",dictResponseError:"Erro ao Salvar",dictMaxFilesExceeded:"Máximo de Uploads Atingido",init:function(){if(this.on("success",function(i,e){e=$.parseJSON(e);var n=""!==a.val()?$.parseJSON(a.val()):[];n=$.grep(n,function(){return!0}),$.each($.parseJSON(e.data),function(e,t){1===t.response&&t.data.name===i.name&&0===$.grep(n,function(e){return e.name===i.name}).length?n.push(t.data):"string"==typeof t.data&&toast(t.data,"warning")}),$(e.id).val(JSON.stringify(n)).trigger("change")}).on("removedfile",function(e){post("form-crud","delete/source",{entity:t.find("input[name=entity]").val(),column:t.find("input[name=column]").val(),name:e.name,files:a.val()},function(e){a.val(e).trigger("change")})}),""!==a.val()){var n=this;$.each($.parseJSON(a.val()),function(e,t){var i={name:t.name,size:t.size,type:t.type,status:Dropzone.ADDED,url:t.url,accepted:!0};n.emit("addedfile",i),t.type.match(/image.*/)&&n.emit("thumbnail",i,t.url),n.emit("complete",i),n.files.push(i)})}}})})}function setJsonValue(e,t){var i=$.grep(""!==e.val()?$.parseJSON(e.val()):[],function(){return!0});-1===$.inArray(t,i)&&i.push(t),e.val(JSON.stringify(i)).trigger("change")}function removeJsonValue(e,t){var i=$.grep(""!==e.val()?$.parseJSON(e.val()):[],function(){return!0});i.removeItem(t),e.val(JSON.stringify(i)).trigger("change")}function removerListMult(e,t){var i=$(e).parent().siblings(".listmult-content");removeJsonValue($(e),t),i.find(".listmult-card[rel="+t+"]").remove()}function editListMult(e,t,i){openPanel(e,$(t),i,$(t+"-btn"))}function readList(i,e,t,n,a){var s=i.hasClass("selecaoUnique")?i.closest(".multFieldsSelect").prev().prev().find("input[type=hidden]").val():0;post("form-crud","read/list",{search:n,entity:e,parent:t,column:a,selecao:s},function(e){var t=i.siblings(".list-complete");t.html(e),$(".list-option").off("mousedown").on("mousedown",function(){$(".list-option").removeClass("active"),$(this).addClass("active"),selectList(t)})},!!ISDEV||"undefined")}function selectList(e){var t=e.find("li.active");e.html(""),e.parent().prev().find(".btn-floating").removeClass("color-teal").addClass("color-white").find("i").html("edit"),"mult"===e.attr("rel")?setListMultValue(e.parent().prev().find("input[type=hidden]"),parseInt(t.attr("rel")),t.text().trim()):selectListOne(e,t);var i=e.siblings(".form-list");-1<["list_mult","extend_mult","selecao_mult","list","selecao"].indexOf(e.parent().prev().find("input[type=hidden]").attr("data-format"))&&checkEntityMultValue(i)}function checkEntityMultValue(e){e.parent().parent().find(".titleRequired").addClass("hide").parent().next().find(".form-list").val("").removeClass("disabled").prop("disabled",!1).parent().prev().find("input[type=hidden]").val("").trigger("click")}function setListMultValue(e,t,i){var n=!0,a=!1,s=e.parent().siblings(".listmult-content"),r=e.parent().siblings(".tpl_list_mult");$.each(e.parent().siblings(".listmult-content").find(".listmult-card"),function(){$(this).attr("rel")===t&&(n=!1,$(this).find(".listmult-title").text().trim()!==i&&(a=$(this).find(".listmult-title")))}),n?(e.parent().siblings(".rest").find("input[type=text]").html(""),copy(r,s,[t,i],"append"),setJsonValue(e,t)):!1!==a&&a.text(i)}function selectListOne(e,t){e.siblings("input[type=text]").val(t.text().trim()),e.parent().prev().find("input[type=hidden]").val(parseInt(t.attr("rel"))).trigger("change")}}Dropzone.autoDiscover=!1;